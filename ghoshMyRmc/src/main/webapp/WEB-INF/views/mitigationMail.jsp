<div class="containerPanel" style="font-size: 15px;">
	<div id="tabs" style="font-family: unset; border: 0;">
		<ul>
			<li><a onclick="app();" href="#tabs-1">Approver</a></li>
			<li><a onclick="ass();" href="#tabs-2">Assessor</a></li>
		</ul>
		<div id="tabs-1" style="padding: 12px;">
			<div>
				<table style="width: 100%; font-size: 14px;">
					<tbody>
						<tr>
							<td style="vertical-align: top; padding-top: 12px;">
								<div align="left" class="mailBodyTemplate"
									style="background: #f0f1f3; border: 1px solid #959ca2; padding: 12px; font-size: 12px; /* height: 405px; */ overflow: auto;">
									Dear User,<br> <br>Our records indicate that
									mitigation activity for the following Client/Department is
									pending on MyRMC Tool and require immediate attention:<br>
									<br>Name :
									<client department="" name=""> <br>
									Location : <location name=""> <br>
									LOB : <lob name=""> <br>
									Assessor Name : <assessor name=""> <br>
									Approver Name : <approver name=""> <br>
									<br>
									You as the registered Approver for this Client/Department to
									conduct Information Security Risk Assessment is requested to
									guide the Assessor to take either of the following actions:<br>
									1) Provide the mitigation date with action plan on tool and
									implement the same. Once implemented, update the response to
									indicate closure.<br>
									2) Accept the risk in case it cannot be mitigated and mention
									the justification in comments section. Upload the mitigation
									evidence as attachment against the accepted risk.<br>
									<br>
									Please use the following link to launch MyRMC Tool:
									https://www.vedhacon.com/myrmc<br>
									<br>
									Below are the risk sources to be mitigated:<br>
									<table width="100%" border="1" cellspacing="0" cellpadding="5"
										style="font-family: Arial; font-size: 13">
										<tbody>
											<tr style="background: #848586;">
												<td align="center" nowrap=""><font color="#FFFFFF">Category</font></td>
												<td align="center" nowrap=""><font color="#FFFFFF">Control</font></td>
												<td align="center" nowrap=""><font color="#FFFFFF">Mitigation
														Date</font></td>
												<td align="center" nowrap=""><font color="#FFFFFF">Status</font></td>
											</tr>
											<tr>
												<td nowrap="" align="center">--</td>
												<td nowrap="" align="center">--</td>
												<td nowrap="" align="center">--</td>
												<td nowrap="" align="center">--</td>
											</tr>
										</tbody>
									</table>
									<br>
									<br>
									You should have received a system generated mail from with
									login credentials. In case of a challenge or you are not able
									to locate the email, please drop a note at admin@myrmc.com<br>
									<br>
									Regards<br>
									MyRMC Team</approver></assessor></lob></location></client>
								</div>
							</td>
						</tr>
					</tbody>
				</table>

			</div>
		</div>
		<div id="tabs-2" style="padding: 12px;">
			<div>
				<table style="width: 100%; font-size: 14px;">
					<tbody>
						<!-- <tr>
							<td><div>Message</div></td>
							<td><textarea name="message" rows="3" id="bodyMsg"
									style="width: 100%; padding: 12px; resize: none; cursor: auto; border: 1px solid #959ca2; background-color: #FFFFFF; overflow: auto; font-size: 12px; font-family: Arial, Helvetica, sans-serif;"></textarea>
							</td>
						</tr> -->
						<tr>
							<!-- <td
								style="vertical-align: top; padding-top: 12px; white-space: nowrap; padding-right: 12px;">Mail
								Template</td> -->
							<td style="vertical-align: top; padding-top: 12px;">
								<div align="left" class="mailBodyTemplate"
									style="background: #f0f1f3; border: 1px solid #959ca2; padding: 12px; font-size: 12px; /* height: 405px; */ overflow: auto;">
									Dear User,<br> <br>Our records indicate that
									mitigation activity for the following Client/Department is
									pending on MyRMC Tool and require immediate attention:<br>
									<br>Name :
									<client department="" name=""> <br>
									Location : <location name=""> <br>
									LOB : <lob name=""> <br>
									Assessor Name : <assessor name=""> <br>
									Approver Name : <approver name=""> <br>
									<br>
									You as the registered Assessor for this Client/Department to
									conduct Information Security Risk Assessment can take either of
									the following actions:<br>
									1) Provide the mitigation date with action plan on tool and
									implement the same. Once implemented, update the response to
									indicate closure.<br>
									2) Accept the risk in case it cannot be mitigated and mention
									the justification in comments section. Upload the mitigation
									evidence as attachment against the accepted risk.<br>
									<br>
									Please use the following link to launch MyRMC Tool:
									https://www.vedhacon.com/myrmc<br>
									<br>
									Below are the risk sources to be mitigated:<br>
									<table width="100%" border="1" cellspacing="0" cellpadding="5"
										style="font-family: Arial; font-size: 13">
										<tbody>
											<tr style="background: #848586;">
												<td align="center" nowrap=""><font color="#FFFFFF">Category</font></td>
												<td align="center" nowrap=""><font color="#FFFFFF">Control</font></td>
												<td align="center" nowrap=""><font color="#FFFFFF">Mitigation
														Date</font></td>
												<td align="center" nowrap=""><font color="#FFFFFF">Status</font></td>
											</tr>
											<tr>
												<td nowrap="" align="center">--</td>
												<td nowrap="" align="center">--</td>
												<td nowrap="" align="center">--</td>
												<td nowrap="" align="center">--</td>
											</tr>
										</tbody>
									</table>
									<br>
									<br>
									You should have received a system generated mail from
									querymedin@gmail.com with login credentials. In case of a
									challenge or you are not able to locate the email, please drop
									a note at admin@myrmc.com<br>
									<br>
									Regards<br>
									MyRMC Team</approver></assessor></lob></location></client>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div>
			<table
				style="width: 90%; background: #f0f1f3; border: 1px solid #b5babe; margin-top: 7px; text-align: center; font-size: 12px; border-collapse: collapse; margin: auto;">
				<tr style="background: #848586; color: #fff;">
					<td
						style="padding: 6px 7px; border: 1px solid #504d4d; width: 25%;">Country</td>
					<td
						style="padding: 6px 7px; border: 1px solid #504d4d; width: 25%;">LOB</td>
					<td
						style="padding: 6px 7px; border: 1px solid #504d4d; width: 25%;">Location</td>
					<td
						style="padding: 6px 7px; border: 1px solid #504d4d; width: 25%;">Client/Department</td>
				</tr>
				<tr>
					<td style="padding: 0; margin: 0;"><div id="approverCountry">
							<select id="approverCountryVal" name="approverCountryVal"
								onchange="updateapproverLob();"
								style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;"><option
									value="0">All</option>
								<c:forEach items="${countries}" var="country">
									<option value="${country.id}">${country.name}</option>
								</c:forEach>
							</select>
						</div></td>
					<td style="padding: 0; margin: 0;"><div id="approverLOB">
							<select id="approverLOBVal" name="approverLOBVal"
								onchange="updateapproverLocation();"
								style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;">
								<option value="0">All</option>
							</select>
						</div></td>
					<td style="padding: 0; margin: 0;"><div id="approverLocation">
							<select id="approverLocationVal" name="approverLocationVal"
								onchange="updateapproverDepartment();"
								style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;">
								<option value="0">All</option>
							</select>
						</div></td>
					<td style="padding: 0; margin: 0;"><div
							id="approverDepartment">
							<select id="approverDepartmentVal" name="approverDepartmentVal"
								style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;">
								<option value="0">All</option>
							</select>
						</div></td>
				</tr>
			</table>
			<div id="sendMailStatus" style="text-align: center;">
				<button id="approverBtn" style="margin: 22px 0;"
					onclick="sendApproverMail();" class="btn btn-primary">Send
					Mail To Approver</button>
				<button id="assessorBtn" style="margin: 22px 0; display: none;"
					onclick="sendAssessorMail();" class="btn btn-primary">Send
					Mail To Assessor</button>
			</div>
		</div>
	</div>
</div>
<script>
	$(function() {
		$("#tabs").tabs();
	});

	function app() {
		$("#approverBtn").css("display", "");
		$("#assessorBtn").css("display", "none");
		$("#sendMsg").css("display", "none");
	}
	function ass() {
		$("#approverBtn").css("display", "none");
		$("#assessorBtn").css("display", "");
		$("#sendMsg").css("display", "none");
	}

	function sendApproverMail() {
		var approvercountryId = $("#approverCountryVal").val();
		var approverLOBId = $("#approverLOBVal").val();
		var approverLocationId = $("#approverLocationVal").val();
		var approverDepartmentId = $("#approverDepartmentVal").val();
		$('#sendMailStatus')
				.html(
						"<img style='width: 44px;margin: 12px 0;' src='${images}/Gear.gif' /> Sending ...");
		$.ajax({
			type : "GET",
			url : "${contextRoot}/admin/sendApproverMail?approvercountryId="
					+ approvercountryId + "&approverLOBId=" + approverLOBId
					+ "&approverLocationId=" + approverLocationId
					+ "&approverDepartmentId=" + approverDepartmentId,
			success : function(response) {
				$('#sendMailStatus').html(response);
			},
			error : function(e) {
				console.log('Error: ' + e);
			}
		});
		$("#approverBtn").css("display", "");
		$("#assessorBtn").css("display", "none");
	}
	function sendAssessorMail() {
		var approvercountryId = $("#approverCountryVal").val();
		var approverLOBId = $("#approverLOBVal").val();
		var approverLocationId = $("#approverLocationVal").val();
		var approverDepartmentId = $("#approverDepartmentVal").val();
		$.ajax({
			type : "GET",
			url : "${contextRoot}/admin/sendAssessorMail?approvercountryId=" + approvercountryId
					+ "&approverLOBId=" + approverLOBId
					+ "&approverLocationId=" + approverLocationId
					+ "&approverDepartmentId=" + approverDepartmentId,
			success : function(response) {
				$('#sendMailStatus').html(response);
			},
			error : function(e) {
				console.log('Error: ' + e);
			}
		});
		$("#approverBtn").css("display", "none");
		$("#assessorBtn").css("display", "");
	}

	function updateapproverLob() {
		var approvercountryId = $("#approverCountryVal").val();
		if (approvercountryId == 0) {
			$("#approverLOB")
					.html(
							'<select id="approverLOBVal" name="approverLOBVal"style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;"><option value="0">All</option></select>');
			$("#approverDepartment")
					.html(
							'<select id="approverDepartmentVal" name="approverDepartmentVal"style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;"><option value="0">All</option></select>');
			$("#approverLocation")
					.html(
							'<select id="approverLocationVal" name="approverLocationVal"style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;"><option value="0">All</option></select>');
		} else {
			$.ajax({
				type : "GET",
				url : "updatedLob?approvercountryId=" + approvercountryId,
				success : function(response) {
					$('#approverLOB').html(response);
				},
				error : function(e) {
					console.log('Error: ' + e);
				}
			});
			$("#approverDepartment")
					.html(
							'<select id="approverDepartmentVal" name="approverDepartmentVal"style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;"><option value="0">All</option></select>');
			$("#approverLocation")
					.html(
							'<select id="approverLocationVal" name="approverLocationVal"style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;"><option value="0">All</option></select>');
		}
	}

	function updateapproverLocation() {
		var approvercountryId = $("#approverCountryVal").val();
		var approverLOBId = $("#approverLOBVal").val();
		if (approverLOBId == 0) {
			$("#approverDepartment")
					.html(
							'<select id="approverDepartmentVal" name="approverDepartmentVal"style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;"><option value="0">All</option></select>');
			$("#approverLocation")
					.html(
							'<select id="approverLocationVal" name="approverLocationVal"style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;"><option value="0">All</option></select>');
		} else {
			$.ajax({
				type : "GET",
				url : "updatedLocation?approvercountryId=" + approvercountryId
						+ "&approverLOBId=" + approverLOBId,
				success : function(response) {
					$('#approverLocation').html(response);
				},
				error : function(e) {
					console.log('Error: ' + e);
				}
			});
			$("#approverDepartment")
					.html(
							'<select id="approverDepartmentVal" name="approverDepartmentVal"style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;"><option value="0">All</option></select>');
		}
	}

	function updateapproverDepartment() {
		var approvercountryId = $("#approverCountryVal").val();
		var approverLOBId = $("#approverLOBVal").val();
		var approverLocationId = $("#approverLocationVal").val();
		if (approverLocationId == 0) {
			$("#approverDepartment")
					.html(
							'<select id="approverDepartmentVal" name="approverDepartmentVal"style="width: 100%; margin: 0; height: 23px; padding: 0px 7px;"><option value="0">All</option></select>');
		} else {
			$.ajax({
				type : "GET",
				url : "updatedDepartment?approvercountryId="
						+ approvercountryId + "&approverLOBId=" + approverLOBId
						+ "&approverLocationId=" + approverLocationId,
				success : function(response) {
					$('#approverDepartment').html(response);
				},
				error : function(e) {
					console.log('Error: ' + e);
				}
			});
		}
	}
</script>